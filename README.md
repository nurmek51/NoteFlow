# Документация по серверной части проекта NoteFlow

## Описание проекта

**NoteFlow** — это платформа для обмена образовательными материалами Университета SDU, предоставляющая пользователям возможность загружать, искать, фильтровать, оценивать и обсуждать учебные материалы по различным предметам. Платформа также включает функциональность чатов для общения между пользователями.

## Структура проекта

Проект имеет следующую файловую структуру:

- **apps/**: содержит приложения Django, реализующие основную функциональность платформы.
  - **users/**: управление пользователями и их профилями.
  - **materials/**: загрузка, хранение и управление образовательными материалами.
  - **reviews/**: система оценки и рецензирования материалов.
  - **comments/**: функциональность для обсуждения материалов.
  - **chats/**: реализация системы чатов между пользователями с использованием Redis и WebSocket.

- **config/**: включает настройки проекта.
  - **settings.py**: основные настройки Django.
  - **urls.py**: маршрутизация URL.
  - **asgi.py**: настройка ASGI для поддержки асинхронных веб-приложений.

- **manage.py**: скрипт для управления проектом Django.
- **requirements.txt**: список зависимостей проекта.
- **README.md**: файл с описанием проекта.

## Установка и настройка

Для запуска серверной части выполните следующие шаги:

1. **Клонируйте репозиторий:**

   ```bash
   git clone https://github.com/nurmek51/NoteFlow.git
   cd NoteFlow
   ```

2. **Создайте и активируйте виртуальное окружение:**

   ```bash
   python -m venv env
   source env/bin/activate  # Для Windows: env\Scripts\activate
   ```

3. **Установите зависимости:**

   ```bash
   pip install -r requirements.txt
   ```

4. **Настройте базу данных:**

   По умолчанию используется SQLite. Для использования другой СУБД (например, PostgreSQL), измените настройки в `config/settings.py`.

5. **Настройте Redis:**

   Убедитесь, что Redis установлен и запущен на вашем сервере. В `config/settings.py` укажите параметры подключения к Redis:

   ```python
   CHANNEL_LAYERS = {
       'default': {
           'BACKEND': 'channels_redis.core.RedisChannelLayer',
           'CONFIG': {
               'hosts': [('127.0.0.1', 6379)],
           },
       },
   }
   ```

6. **Примените миграции базы данных:**

   ```bash
   python manage.py migrate
   ```

7. **Создайте суперпользователя для доступа к административной панели:**

   ```bash
   python manage.py createsuperuser
   ```

8. **Запустите сервер разработки:**

   ```bash
   python manage.py runserver
   ```

   Сервер будет доступен по адресу `http://127.0.0.1:8000/`.

## Чат-система

Приложение `chats` реализует функциональность чатов между пользователями с использованием WebSocket и Redis. Основные компоненты:

- **Routing**: в `chats/routing.py` определены маршруты для WebSocket-подключений.
- **Consumers**: в `chats/consumers.py` реализованы обработчики WebSocket-сообщений.
- **Models**: в `chats/models.py` определены модели для хранения сообщений и чатов.

Для обеспечения работы чатов необходимо:

- Настроить Redis и указать параметры подключения в `config/settings.py`.
- Добавить `channels` и `chats` в список установленных приложений в `config/settings.py`.
- Настроить ASGI-приложение в `config/asgi.py` для поддержки каналов.

## Настройки проекта

Файл `config/settings.py` содержит основные настройки проекта, включая параметры базы данных, приложения, middleware и другие конфигурации. При необходимости вы можете изменить настройки базы данных, указав параметры подключения к вашей СУБД.

## Управление зависимостями

Файл `requirements.txt` содержит список зависимостей проекта. Для установки всех необходимых пакетов используйте команду:

```bash
pip install -r requirements.txt
```

## Управление базой данных

Django использует ORM для работы с базой данных. Для применения изменений в моделях используйте команды:

```bash
python manage.py makemigrations
python manage.py migrate
```

## Административная панель

Django предоставляет встроенную административную панель для управления данными. После создания суперпользователя вы можете получить доступ к панели по адресу `http://127.0.0.1:8000/admin/` и управлять пользователями, материалами и другими сущностями.

## Тестирование

Для запуска тестов используйте команду:

```bash
python manage.py test
```

Рекомендуется регулярно запускать тесты для обеспечения стабильности и корректности работы приложения.

## Заключение

NoteFlow предоставляет мощный и гибкий инструмент для управления образовательными материалами и общения между пользователями в Университете SDU. Следуя данной документации, вы сможете успешно развернуть и настроить серверную часть платформы, а также адаптировать ее под специфические требования вашего учебного заведения. 
